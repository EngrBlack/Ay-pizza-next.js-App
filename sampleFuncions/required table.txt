‚úÖ Table 1: products
Holds all product types (pizza, milkshake, etc.).


create table products (
  id uuid primary key default gen_random_uuid(),
  name text not null,
  category text not null, -- pizza, milkshake, ice_cream, burger, drink, side
  description text,
  image_url text,
  base_price numeric,
  sizes jsonb,       -- optional: [{ name: 'Small', price: 8 }]
  toppings jsonb,    -- optional: [{ name: 'Cheese', price: 1 }]
  is_available boolean default true,
  created_at timestamp default now()
);

 Table 2: cart_items
Tracks the logged-in user's current selections before checkout.

create table cart_items (
  id uuid primary key default gen_random_uuid(),
  user_id uuid references auth.users on delete cascade,
  product_id uuid references products(id),
  selected_size jsonb,     -- { name, price } (nullable)
  selected_toppings jsonb, -- array of toppings [{ name, price }] (nullable)
  quantity int not null default 1,
  created_at timestamp default now()
);

Table 3: orders
Order metadata and tracking.

create table orders (
  id uuid primary key default gen_random_uuid(),
  user_id uuid references auth.users,
  total numeric,
  status text default 'pending', -- pending, paid, shipped
  payment_method text,           -- stripe, paypal, cod
  shipping_address text,
  created_at timestamp default now()
);

 Table 4: order_items
Products tied to an order, with options preserved.

create table order_items (
  id uuid primary key default gen_random_uuid(),
  order_id uuid references orders(id) on delete cascade,
  product_id uuid references products(id),
  selected_size jsonb,     -- same structure as cart
  selected_toppings jsonb, -- optional
  quantity int not null,
  price numeric -- total for this line (1 item * quantity)
);

 Table 5: payments
Tracks how an order was paid.

create table payments (
  id uuid primary key default gen_random_uuid(),
  order_id uuid references orders(id),
  payment_method text, -- stripe, paypal, cod
  payment_status text default 'completed',
  transaction_id text,
  paid_at timestamp default now()
);

 Table 6 (Optional): profiles
If you want to store more user info beyond Supabase Auth.

create table profiles (
  id uuid primary key references auth.users,
  full_name text,
  phone text,
  address text
);


 products ‚Äî Sample Data (SQL)
sql
Copy
Edit
-- üçï Pizzas
insert into products (id, name, category, description, image_url, base_price, sizes, toppings, is_available)
values 
  (gen_random_uuid(), 'Margherita', 'pizza', 'Tomato, mozzarella & basil', 'https://example.com/pizza-margherita.jpg', 8.0,
   '[{"name": "Small", "price": 8.0}, {"name": "Medium", "price": 10.0}, {"name": "Large", "price": 12.0}]',
   '[{"name": "Extra Cheese", "price": 1.0}, {"name": "Olives", "price": 0.8}]',
   true),

  (gen_random_uuid(), 'Pepperoni', 'pizza', 'Pepperoni & cheese', 'https://example.com/pizza-pepperoni.jpg', 9.0,
   '[{"name": "Small", "price": 9.0}, {"name": "Medium", "price": 11.0}, {"name": "Large", "price": 13.0}]',
   '[{"name": "Bacon", "price": 1.5}, {"name": "Onions", "price": 0.7}]',
   true);


-- ü•§ Milkshakes
insert into products (id, name, category, description, image_url, base_price, sizes, toppings, is_available)
values 
  (gen_random_uuid(), 'Vanilla Milkshake', 'milkshake', 'Creamy vanilla shake', 'https://example.com/shake-vanilla.jpg', 4.5,
   '[{"name": "Regular", "price": 4.5}, {"name": "Large", "price": 5.5}]',
   '[{"name": "Whipped Cream", "price": 0.5}, {"name": "Caramel Drizzle", "price": 0.75}]',
   true),

  (gen_random_uuid(), 'Strawberry Milkshake', 'milkshake', 'Fresh strawberry shake', 'https://example.com/shake-strawberry.jpg', 5.0,
   '[{"name": "Regular", "price": 5.0}, {"name": "Large", "price": 6.0}]',
   '[{"name": "Whipped Cream", "price": 0.5}, {"name": "Sprinkles", "price": 0.4}]',
   true);


-- üç® Ice Creams
insert into products (id, name, category, description, image_url, base_price, sizes, toppings, is_available)
values 
  (gen_random_uuid(), 'Chocolate Ice Cream', 'ice_cream', 'Rich chocolate scoop', 'https://example.com/ice-chocolate.jpg', 3.0,
   '[{"name": "Cup", "price": 3.0}, {"name": "Cone", "price": 3.5}]',
   '[{"name": "Choco Chips", "price": 0.5}, {"name": "Sprinkles", "price": 0.4}]',
   true),

  (gen_random_uuid(), 'Vanilla Ice Cream', 'ice_cream', 'Classic vanilla scoop', 'https://example.com/ice-vanilla.jpg', 3.0,
   '[{"name": "Cup", "price": 3.0}, {"name": "Cone", "price": 3.5}]',
   '[{"name": "Syrup", "price": 0.6}, {"name": "Nuts", "price": 0.8}]',
   true);


-- üçî Burgers
insert into products (id, name, category, description, image_url, base_price, is_available)
values 
  (gen_random_uuid(), 'Classic Beef Burger', 'burger', 'Beef patty with cheese', 'https://example.com/burger-beef.jpg', 7.0, true),

  (gen_random_uuid(), 'Chicken Burger', 'burger', 'Grilled chicken with lettuce', 'https://example.com/burger-chicken.jpg', 6.5, true);


-- üßÉ Drinks
insert into products (id, name, category, description, image_url, base_price, is_available)
values 
  (gen_random_uuid(), 'Coca-Cola', 'drink', 'Cold fizzy cola', 'https://example.com/drink-coke.jpg', 1.5, true),

  (gen_random_uuid(), 'Fanta Orange', 'drink', 'Citrusy orange drink', 'https://example.com/drink-fanta.jpg', 1.5, true);


-- üçü Sides
insert into products (id, name, category, description, image_url, base_price, is_available)
values 
  (gen_random_uuid(), 'French Fries', 'side', 'Crispy golden fries', 'https://example.com/side-fries.jpg', 2.5, true),

  (gen_random_uuid(), 'Chicken Nuggets', 'side', '6 piece nuggets', 'https://example.com/side-nuggets.jpg', 3.